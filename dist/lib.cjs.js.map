{"version":3,"file":"lib.cjs.js","sources":["../node_modules/tslib/tslib.es6.js","../src/helpers/ViewPortConst.ts","../src/helpers/Matrix.ts","../src/helpers/Point.ts","../src/registry/Registry.ts","../src/helpers/SpacialHelper.ts","../node_modules/style-inject/dist/style-inject.es.js","../src/rubberBand/RubberBand.tsx","../src/helpers/ZoomPanHelper.ts","../src/renderer/HOCElement.tsx","../src/ZoomPan.tsx"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","const Consts = {\r\n  MODE_GLOBAL_PAN: 1,\r\n  MODE_RUBER_BAND_MOVE: 2,\r\n  MODE_RUBER_BAND_ROTATE: 3,\r\n  MODE_RUBER_BAND_RESIZE_UL: 4,\r\n  MODE_RUBER_BAND_RESIZE_UR: 5,\r\n  MODE_RUBER_BAND_RESIZE_DL: 6,\r\n  MODE_RUBER_BAND_RESIZE_DR: 7,\r\n  MODE_RUBER_PADDING: 8,\r\n  MODE_RUBER_ADD_LINK_LEFT: 9,\r\n  MODE_RUBER_ADD_LINK_RIGHT: 10,\r\n  MODE_PAGE_MOVE: 11,\r\n\r\n  CLOCKWISE: 22,\r\n  UNCLOCKWISE: 23,\r\n\r\n  KEY_LEFT: 37,\r\n  KEY_UP: 38,\r\n  KEY_RIGHT: 39,\r\n  KEY_DOWN: 40,\r\n  KEY_COPY: 67,\r\n  KEY_CUT: 88,\r\n  KEY_PASTE: 86,\r\n  KEY_DELETE: 46,\r\n  RUBBER_BAND_HANDLE_SIZE: 5,\r\n  RUBBER_BAND_EVENT_HANDLE_SIZE: 10,\r\n  RUBBER_BAND_EVENT_HANDLE_SIZE_HALF: 5,\r\n};\r\n\r\nexport const ObjectTypes = {\r\n  TYPE_ITEM: 0,\r\n  TYPE_LINK: 1,\r\n};\r\n\r\nexport default Consts;\r\n","class Matrix {\r\n  a: number = 1;\r\n  b: number = 0;\r\n  c: number = 0;\r\n  d: number = 1;\r\n  e: number = 0;\r\n  f: number = 0;\r\n  constructor(data?: string) {\r\n    this.apply(data);\r\n  }\r\n\r\n  apply(data?: string) {\r\n    let values: Array<any> = [1, 0, 0, 1, 0, 0];\r\n    if (data) {\r\n      values = data.split(',');\r\n    }\r\n\r\n    this.a = parseFloat(values[0]);\r\n    this.b = parseFloat(values[1]);\r\n    this.c = parseFloat(values[2]);\r\n    this.d = parseFloat(values[3]);\r\n    this.e = parseFloat(values[4]);\r\n    this.f = parseFloat(values[5]);\r\n    this.transform = this.transform.bind(this);\r\n    this.rotate = this.rotate.bind(this);\r\n    this.applyToPoint = this.applyToPoint.bind(this);\r\n    this._isEqual = this._isEqual.bind(this);\r\n  }\r\n\r\n  flipX() {\r\n    return this.transform(-1, 0, 0, 1, 0, 0);\r\n  }\r\n\r\n  /**\r\n   * Flips the vertical values.\r\n   */\r\n  flipY() {\r\n    return this.transform(1, 0, 0, -1, 0, 0);\r\n  }\r\n\r\n  reset() {\r\n    this.a = this.d = 1;\r\n    this.b = this.c = this.e = this.f = 0;\r\n    return this;\r\n  }\r\n\r\n  rotate(angle) {\r\n    let cos = Math.cos(angle * 0.017453292519943295),\r\n      sin = Math.sin(angle * 0.017453292519943295);\r\n    return this.transform(cos, sin, -sin, cos, 0, 0);\r\n  }\r\n\r\n  rotateDeg(angle) {\r\n    return this.rotate(angle * 0.017453292519943295);\r\n  }\r\n\r\n  scale(sx: number, sy: number) {\r\n    return this.transform(sx, 0, 0, sy, 0, 0);\r\n  }\r\n\r\n  scaleX(sx) {\r\n    return this.transform(sx, 0, 0, 1, 0, 0);\r\n  }\r\n\r\n  scaleY(sy) {\r\n    return this.transform(1, 0, 0, sy, 0, 0);\r\n  }\r\n\r\n  skew(sx, sy) {\r\n    return this.transform(1, sy, sx, 1, 0, 0);\r\n  }\r\n\r\n  skewX(sx) {\r\n    return this.transform(1, 0, sx, 1, 0, 0);\r\n  }\r\n\r\n  skewY(sy) {\r\n    return this.transform(1, sy, 0, 1, 0, 0);\r\n  }\r\n\r\n  setTransform(a, b, c, d, e, f) {\r\n    this.a = a;\r\n    this.b = b;\r\n    this.c = c;\r\n    this.d = d;\r\n    this.e = e;\r\n    this.f = f;\r\n    return this;\r\n  }\r\n\r\n  translate(tx, ty) {\r\n    return this.transform(1, 0, 0, 1, tx, ty);\r\n  }\r\n\r\n  transform(a2, b2, c2, d2, e2, f2) {\r\n    let a1 = this.a,\r\n      b1 = this.b,\r\n      c1 = this.c,\r\n      d1 = this.d,\r\n      e1 = this.e,\r\n      f1 = this.f;\r\n    let result = new Matrix();\r\n    result.a = a1 * a2 + c1 * b2;\r\n    result.b = b1 * a2 + d1 * b2;\r\n    result.c = a1 * c2 + c1 * d2;\r\n    result.d = b1 * c2 + d1 * d2;\r\n    result.e = a1 * e2 + c1 * f2 + e1;\r\n    result.f = b1 * e2 + d1 * f2 + f1;\r\n\r\n    return result;\r\n  }\r\n\r\n  multiply(matrix) {\r\n    let result = new Matrix();\r\n    let a1 = this.a,\r\n      b1 = this.b,\r\n      c1 = this.c,\r\n      d1 = this.d,\r\n      e1 = this.e,\r\n      f1 = this.f;\r\n\r\n    result.a = a1 * matrix.a + c1 * matrix.b;\r\n    result.b = b1 * matrix.a + d1 * matrix.b;\r\n    result.c = a1 * matrix.c + c1 * matrix.d;\r\n    result.d = b1 * matrix.c + d1 * matrix.d;\r\n    result.e = a1 * matrix.e + c1 * matrix.f + e1;\r\n    result.f = b1 * matrix.e + d1 * matrix.f + f1;\r\n\r\n    return result;\r\n  }\r\n\r\n  inverse() {\r\n    let a = this.a,\r\n      b = this.b,\r\n      c = this.c,\r\n      d = this.d,\r\n      e = this.e,\r\n      f = this.f,\r\n      m = new Matrix(),\r\n      dt = a * d - b * c;\r\n\r\n    m.a = d / dt;\r\n    m.b = -b / dt;\r\n    m.c = -c / dt;\r\n    m.d = a / dt;\r\n    m.e = (c * f - d * e) / dt;\r\n    m.f = -(a * f - b * e) / dt;\r\n\r\n    return m;\r\n  }\r\n\r\n  interpolate(m2, t) {\r\n    let m = new Matrix();\r\n\r\n    m.a = this.a + (m2.a - this.a) * t;\r\n    m.b = this.b + (m2.b - this.b) * t;\r\n    m.c = this.c + (m2.c - this.c) * t;\r\n    m.d = this.d + (m2.d - this.d) * t;\r\n    m.e = this.e + (m2.e - this.e) * t;\r\n    m.f = this.f + (m2.f - this.f) * t;\r\n\r\n    return m;\r\n  }\r\n\r\n  applyToPoint(x: number, y: number) {\r\n    return {\r\n      x: x * this.a + y * this.c + this.e,\r\n      y: x * this.b + y * this.d + this.f,\r\n    };\r\n  }\r\n\r\n  applyToArray(points) {\r\n    let i = 0,\r\n      p,\r\n      l,\r\n      mxPoints: any = [];\r\n\r\n    if (typeof points[0] === 'number') {\r\n      l = points.length;\r\n\r\n      while (i < l) {\r\n        p = this.applyToPoint(points[i++], points[i++]);\r\n        mxPoints.push(p.x, p.y);\r\n      }\r\n    } else {\r\n      for (; (p = points[i]); i++) {\r\n        mxPoints.push(this.applyToPoint(p.x, p.y));\r\n      }\r\n    }\r\n\r\n    return mxPoints;\r\n  }\r\n\r\n  applyToTypedArray(points) {\r\n    let i = 0,\r\n      p,\r\n      l = points.length,\r\n      mxPoints = new Float32Array(l);\r\n\r\n    while (i < l) {\r\n      p = this.applyToPoint(points[i], points[i + 1]);\r\n      mxPoints[i++] = p.x;\r\n      mxPoints[i++] = p.y;\r\n    }\r\n\r\n    return mxPoints;\r\n  }\r\n\r\n  isIdentity() {\r\n    return (\r\n      this._isEqual(this.a, 1) &&\r\n      this._isEqual(this.b, 0) &&\r\n      this._isEqual(this.c, 0) &&\r\n      this._isEqual(this.d, 1) &&\r\n      this._isEqual(this.e, 0) &&\r\n      this._isEqual(this.f, 0)\r\n    );\r\n  }\r\n\r\n  isEqual(m) {\r\n    return (\r\n      this._isEqual(this.a, m.a) &&\r\n      this._isEqual(this.b, m.b) &&\r\n      this._isEqual(this.c, m.c) &&\r\n      this._isEqual(this.d, m.d) &&\r\n      this._isEqual(this.e, m.e) &&\r\n      this._isEqual(this.f, m.f)\r\n    );\r\n  }\r\n\r\n  _isEqual(f1, f2) {\r\n    return Math.abs(f1 - f2) < 1e-14;\r\n  }\r\n\r\n  matrixToText() {\r\n    return (\r\n      this.a +\r\n      ', ' +\r\n      this.b +\r\n      ', ' +\r\n      this.c +\r\n      ', ' +\r\n      this.d +\r\n      ', ' +\r\n      this.e +\r\n      ', ' +\r\n      this.f\r\n    );\r\n  }\r\n  get trx() {\r\n    return this.e;\r\n  }\r\n  set trx(value) {\r\n    this.e = value;\r\n  }\r\n  get try() {\r\n    return this.f;\r\n  }\r\n  set try(value) {\r\n    this.f = value;\r\n  }\r\n}\r\nexport default Matrix;\r\n","import Matrix from './Matrix';\r\n\r\nclass Point {\r\n  x = 0;\r\n  y = 0;\r\n\r\n  constructor(x: number, y: number) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  matrixTransform(matrix: Matrix) {\r\n    const x = this.x;\r\n    const y = this.y;\r\n\r\n    this.x = x * matrix.a + y * matrix.c + matrix.e;\r\n    this.y = x * matrix.b + y * matrix.d + matrix.f;\r\n  }\r\n}\r\n\r\nexport default Point;\r\n","class Registry {\r\n  data: any;\r\n  constructor() {\r\n    this.data = {};\r\n  }\r\n  addAll = (list) => {\r\n    if (!list) return;\r\n    this.data = {};\r\n    list.forEach((element) => {\r\n      this.data[element.id] = element;\r\n    });\r\n  };\r\n  add(id, obj) {\r\n    this.data[id] = obj;\r\n  }\r\n  del(id) {\r\n    delete this.data[id];\r\n  }\r\n  get(id) {\r\n    return this.data[id];\r\n  }\r\n  delAll() {\r\n    this.data = {};\r\n  }\r\n}\r\nconst instanceRegistry = new Registry();\r\nexport default instanceRegistry;\r\n","import Consts from './ViewPortConst';\r\nimport Matrix from './Matrix';\r\nimport Point from './Point';\r\nimport Registry from '../registry/Registry';\r\n\r\nconst radiansFactor = 180 / Math.PI;\r\n\r\nclass SpacialHelper {\r\n  static normaliseVector(vector) {\r\n    if (Math.abs(vector.x) > Math.abs(vector.y)) {\r\n      return vector.x > 0 ? { x: 1, y: 0 } : { x: -1, y: 0 };\r\n    } else {\r\n      return vector.y > 0 ? { x: 0, y: 1 } : { x: 0, y: -1 };\r\n    }\r\n  }\r\n\r\n  //Distance between 2 points\r\n  static calculateDistance(p1, p2) {\r\n    return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\r\n  }\r\n\r\n  static calculateRotationsAngle(p1, center, p2) {\r\n    const p1Center = SpacialHelper.calculateDistance(p1, center);\r\n    const p2Center = SpacialHelper.calculateDistance(p2, center);\r\n    const p1p2 = SpacialHelper.calculateDistance(p1, p2);\r\n    const enu = Math.pow(p1Center, 2) + Math.pow(p2Center, 2) - Math.pow(p1p2, 2);\r\n    const deno = 2 * p1Center * p2Center;\r\n    return Math.acos(enu / deno) * radiansFactor;\r\n  }\r\n  static getParentMatrix(id, combine) {\r\n    const parentId = Registry.get(id).parent;\r\n    if (!parentId) return combine;\r\n    const parentObj = Registry.get(parentId);\r\n    const parentMtx = parentObj.matrix;\r\n    if (combine) combine = combine.multiply(parentMtx);\r\n    else combine = parentMtx;\r\n    return SpacialHelper.getParentMatrix(parentId, combine);\r\n  }\r\n\r\n  static getCombineMatrix(id) {\r\n    const combine = new Matrix(Registry.get(id).transform);\r\n    const parentMtx = SpacialHelper.getParentMatrix(id, combine);\r\n    return parentMtx ? parentMtx : combine;\r\n  }\r\n\r\n  static degrees(radians) {\r\n    return radians * radiansFactor;\r\n  }\r\n\r\n  static rotateToCenter(cx, cy, angle, matrix) {\r\n    if (angle == 0 || !matrix) return matrix;\r\n    matrix = matrix.translate(cx, cy);\r\n    matrix = matrix.rotate(angle);\r\n    matrix = matrix.translate(-cx, -cy);\r\n    return matrix;\r\n  }\r\n\r\n  static scaleToCenter(cx, cy, scale, matrix) {\r\n    if (scale == 0 || !matrix) return matrix;\r\n    matrix = matrix.translate(cx, cy);\r\n    matrix = matrix.scale(scale, scale);\r\n    matrix = matrix.translate(-cx, -cy);\r\n    return matrix;\r\n  }\r\n\r\n  static getRotationDirection(p1, p2, center) {\r\n    let vector = { x: p2.x - p1.x, y: p2.y - p1.y };\r\n    vector = SpacialHelper.normaliseVector(vector);\r\n    //we are on x\r\n    if (vector.y === 0) {\r\n      if (p1.y - center.y < 0) {\r\n        return vector.x > 0 ? Consts.CLOCKWISE : Consts.UNCLOCKWISE;\r\n      } else {\r\n        return vector.x < 0 ? Consts.CLOCKWISE : Consts.UNCLOCKWISE;\r\n      }\r\n    } else {\r\n      if (p1.x - center.x > 0) {\r\n        return vector.y > 0 ? Consts.CLOCKWISE : Consts.UNCLOCKWISE;\r\n      } else {\r\n        return vector.y < 0 ? Consts.CLOCKWISE : Consts.UNCLOCKWISE;\r\n      }\r\n    }\r\n  }\r\n  static transfromIncrement(dx, dy, global, selectedObjMatrix) {\r\n    //La concatenada\r\n    let matrix = global;\r\n    if (global) {\r\n      matrix = matrix.multiply(selectedObjMatrix);\r\n    } else {\r\n      matrix = selectedObjMatrix;\r\n    }\r\n    const pts = new Point(0, 0);\r\n    const pte = new Point(dx, dy);\r\n    const inverse = matrix.inverse();\r\n    pts.matrixTransform(inverse);\r\n    pte.matrixTransform(inverse);\r\n    return { dx: pte.x - pts.x, dy: pte.y - pts.y };\r\n  }\r\n\r\n  static coordinatesGlobalToLocal(x, y, global, parent) {\r\n    //La concatenada\r\n    const pts = new Point(x, y);\r\n    if (global) pts.matrixTransform(global.inverse());\r\n    if (parent) pts.matrixTransform(parent.inverse());\r\n    return pts;\r\n  }\r\n\r\n  static transformToViewPort(x, y, globalM, itemM, parent) {\r\n    const pts = new Point(x, y);\r\n    if (!globalM || !itemM) return pts;\r\n    if (parent) globalM = globalM.multiply(parent);\r\n    const matrix = globalM.multiply(itemM);\r\n\r\n    pts.matrixTransform(matrix);\r\n    return pts;\r\n  }\r\n\r\n  static viewPorttoObject(x, y, globalM, parent) {\r\n    const itemMatrix = new Matrix();\r\n\r\n    itemMatrix.translate(x, y);\r\n    let contextMatrix = globalM ? globalM : itemMatrix;\r\n    if (parent) contextMatrix = contextMatrix.multiply(parent);\r\n    contextMatrix = contextMatrix.inverse();\r\n    return itemMatrix.multiply(contextMatrix);\r\n  }\r\n\r\n  // To calculate the rubber band position giving a selected element\r\n  // We nede to do the following\r\n  // 1)Get the box of the element\r\n  // 2)Remove the rotation out of the item matrix\r\n  // 3)Get the combine matrix of global and item without the rotation\r\n  // 4)Get the x,y,w,h new positions\r\n  // 5)Calculate the newmatix of the rubberband to apply rotation\r\n\r\n  static calculateRubberBandPosition(\r\n    selectedMatrix,\r\n    selectedBox,\r\n    globalMatrix,\r\n    parentMatrix\r\n  ) {\r\n    if (!selectedMatrix) {\r\n      return {\r\n        x: 0,\r\n        y: 0,\r\n        w: 0,\r\n        h: 0,\r\n        transform: 0,\r\n      };\r\n    }\r\n\r\n    let box = selectedBox;\r\n    const matrix = selectedMatrix;\r\n    //extract rotation\r\n    box = this.calculateTrasformBox(box, globalMatrix, matrix, parentMatrix);\r\n    box.x = box.x - Consts.RUBBER_BAND_HANDLE_SIZE;\r\n    box.y = box.y - Consts.RUBBER_BAND_HANDLE_SIZE;\r\n    box.w = box.w + Consts.RUBBER_BAND_HANDLE_SIZE * 2;\r\n    box.h = box.h + Consts.RUBBER_BAND_HANDLE_SIZE * 2;\r\n\r\n    let rubberMatrix = new Matrix();\r\n    const cx = box.x + box.w / 2;\r\n    const cy = box.y + box.h / 2;\r\n    rubberMatrix = SpacialHelper.rotateToCenter(\r\n      cx,\r\n      cy,\r\n      box.angle,\r\n      rubberMatrix\r\n    );\r\n    return {\r\n      x: box.x,\r\n      y: box.y,\r\n      w: box.w,\r\n      h: box.h,\r\n      transform: rubberMatrix.matrixToText(),\r\n    };\r\n  }\r\n\r\n  //Calculates the the box position with combine matrix minus\r\n  //taking out the item matrix rotation\r\n  static calculateTrasformBox(box, globalM, itemM, parentMatrix) {\r\n    let angle = 0;\r\n    if (itemM.b != 0)\r\n      angle = SpacialHelper.degrees(Math.atan2(itemM.b, itemM.a));\r\n    if (parentMatrix) globalM = globalM.multiply(parentMatrix);\r\n    //Remove roation from item matrix\r\n    const cx = box.w / 2;\r\n    const cy = box.h / 2;\r\n    itemM = SpacialHelper.rotateToCenter(cx, cy, -angle, itemM);\r\n    //Combine with global\r\n    const matrix = globalM.multiply(itemM);\r\n    //get new point given the new combine matrix\r\n    const pts = new Point(0, 0);\r\n    const pte = new Point(box.w, box.h);\r\n    pts.matrixTransform(matrix);\r\n    pte.matrixTransform(matrix);\r\n\r\n    pte.x = pte.x - pts.x;\r\n    pte.y = pte.y - pts.y;\r\n    return { x: pts.x, y: pts.y, w: pte.x, h: pte.y, angle: angle };\r\n  }\r\n\r\n  static moveObject(dx, dy, state) {\r\n    const increment = SpacialHelper.transfromIncrement(\r\n      dx,\r\n      dy,\r\n      state.viewportMtx,\r\n      state.selection.matrix\r\n    );\r\n    let objMatrix = state.selection.matrix;\r\n    objMatrix = objMatrix.translate(-increment.dx, -increment.dy);\r\n    return { matrix: objMatrix, box: null };\r\n  }\r\n\r\n  static checkConstrains(objbox, matrix, parentbox) {\r\n    if (!parentbox) return true;\r\n    const ptl = new Point(0, 0);\r\n    const ptr = new Point(objbox.w, 0);\r\n    const pbl = new Point(0, objbox.h);\r\n    const pbr = new Point(objbox.w, objbox.h);\r\n    ptl.matrixTransform(matrix);\r\n    if (!SpacialHelper.isPointInBox(ptl, parentbox)) return false;\r\n    ptr.matrixTransform(matrix);\r\n    if (!SpacialHelper.isPointInBox(ptr, parentbox)) return false;\r\n    pbl.matrixTransform(matrix);\r\n    if (!SpacialHelper.isPointInBox(pbl, parentbox)) return false;\r\n    pbr.matrixTransform(matrix);\r\n    if (!SpacialHelper.isPointInBox(pbr, parentbox)) return false;\r\n    return true;\r\n  }\r\n  static isPointInBox(point, box) {\r\n    if (point.x < 0 || point.y < 0) return false;\r\n    if (point.x > box.w || point.y > box.h) return false;\r\n    return true;\r\n  }\r\n\r\n  static rotateObject(x, y, lastx, lasty, state) {\r\n    //Calculating angle giv\r\n    const box = state.box;\r\n    const cx = box.x + box.w / 2;\r\n    const cy = box.y + box.h / 2;\r\n\r\n    const p1 = { x: lastx, y: lasty };\r\n    const p2 = { x: x, y: y };\r\n    const center = SpacialHelper.transformToViewPort(\r\n      cx,\r\n      cy,\r\n      state.viewportMtx,\r\n      state.selection.matrix,\r\n      state.parentMtx\r\n    );\r\n\r\n    const direction = SpacialHelper.getRotationDirection(p1, p2, center);\r\n    let angle = SpacialHelper.calculateRotationsAngle(p1, center, p2);\r\n\r\n    angle = direction == Consts.CLOCKWISE ? angle : -angle;\r\n\r\n    let objMatrix = state.selection.matrix;\r\n    //let inc=2.0;\r\n\r\n    objMatrix = objMatrix.translate(cx, cy);\r\n    objMatrix = objMatrix.rotate(angle);\r\n    objMatrix = objMatrix.translate(-cx, -cy);\r\n    \r\n    return { matrix: objMatrix, box: null };\r\n  }\r\n\r\n  static scaleObject(dx, dy, right, state) {\r\n    const box = state.box;\r\n    const cx = box.x + box.w / 2;\r\n    const cy = box.y + box.h / 2;\r\n\r\n    if (!right) {\r\n      dx = -dx;\r\n      dy = -dy;\r\n    }\r\n\r\n    //To Calculate the tramsformer right scale to increase\r\n    const increment = SpacialHelper.transfromIncrement(\r\n      dx,\r\n      dy,\r\n      state.viewportMtx,\r\n      state.selection.matrix\r\n    );\r\n    const oldpoint = SpacialHelper.transfromIncrement(\r\n      box.x + box.w - cx,\r\n      box.y + box.h - cy,\r\n      state.viewportMtx,\r\n      state.selection.matrix\r\n    );\r\n    const newpoint = SpacialHelper.transfromIncrement(\r\n      box.x + box.w - increment.dx - cx,\r\n      box.y + box.h - increment.dy - cy,\r\n      state.viewportMtx,\r\n      state.selection.matrix\r\n    );\r\n\r\n    if (box.x + box.w - increment.dx < cx) return;\r\n    if (box.y + box.h - increment.dy < cy) return;\r\n\r\n    const ix = newpoint.dx / oldpoint.dx;\r\n    const iy = newpoint.dy / oldpoint.dy;\r\n\r\n    let objMatrix = state.selection.matrix;\r\n    objMatrix = objMatrix.translate(cx, cy);\r\n    objMatrix = objMatrix.scale(ix, iy);\r\n    objMatrix = objMatrix.translate(-cx, -cy);\r\n    return { matrix: objMatrix, box: null };\r\n  }\r\n\r\n  static resizeObject(dx, dy, side, state) {\r\n    const box = state.selection.box;\r\n    let ix = 0;\r\n    let iy = 0;\r\n\r\n    //To Calculate the tramsformer right scale to increase\r\n    const increment = SpacialHelper.transfromIncrement(\r\n      dx,\r\n      dy,\r\n      state.viewportMtx,\r\n      state.selection.matrix\r\n    );\r\n    let fdx = 0;\r\n    let fdy = 0;\r\n    let objMatrix = state.selection.matrix;\r\n    switch (side) {\r\n      case Consts.MODE_RUBER_BAND_RESIZE_UL:\r\n        ix = -increment.dx;\r\n        iy = -increment.dy;\r\n        fdx = increment.dx;\r\n        fdy = increment.dy;\r\n        break;\r\n      case Consts.MODE_RUBER_BAND_RESIZE_UR:\r\n        iy = -increment.dy;\r\n        fdx = -increment.dx;\r\n        fdy = increment.dy;\r\n        break;\r\n      case Consts.MODE_RUBER_BAND_RESIZE_DL:\r\n        ix = -increment.dx;\r\n        fdx = increment.dx;\r\n        fdy = -increment.dy;\r\n        break;\r\n      case Consts.MODE_RUBER_BAND_RESIZE_DR:\r\n        fdx = -increment.dx;\r\n        fdy = -increment.dy;\r\n        break;\r\n    }\r\n\r\n    //ver aplicar la inversa del incremento x,y si left or up\r\n    //return new (w,h)\r\n    const objBox = { x: 0, y: 0, w: box.w + fdx, h: box.h + fdy };\r\n    objMatrix = objMatrix.translate(ix, iy);\r\n    return { matrix: objMatrix, box: objBox };\r\n  }\r\n}\r\nexport default SpacialHelper;\r\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\r\nimport Consts from '../helpers/ViewPortConst';\r\nimport SpacialHelper from '../helpers/SpacialHelper';\r\nimport './RubberBand.css';\r\n\r\ninterface RubberBandProps {\r\n  selectedItem?: any;\r\n  viewport?: any;\r\n  selection?: any;\r\n  doRubberMouseDown: Function;\r\n}\r\n\r\nclass RubberBand extends React.Component<RubberBandProps> {\r\n  constructor(props) {\r\n    super(props);\r\n    this.calculateCoordinates = this.calculateCoordinates.bind(this);\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps: RubberBandProps, nextState) {\r\n    return (\r\n      nextProps.selectedItem ||\r\n      nextProps.viewport.viewportTr !== this.props.viewport.viewportTr ||\r\n      nextProps.viewport.selectedTr !== this.props.viewport.viewportTr ||\r\n      nextProps.viewport.parentTr !== this.props.viewport.viewportTr\r\n    );\r\n  }\r\n\r\n  calculateCoordinates() {\r\n    const box = SpacialHelper.calculateRubberBandPosition(\r\n      this.props.viewport.selection.matrix,\r\n      this.props.viewport.selection.box,\r\n      this.props.viewport.viewportMtx,\r\n      null\r\n    );\r\n    return { x: box.x, y: box.y, w: box.w, h: box.h, transform: box.transform };\r\n  }\r\n\r\n  render() {\r\n    const coordinates = this.calculateCoordinates();\r\n    const { selection } = this.props;\r\n    \r\n    if (!selection) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <svg\r\n        id=\"Rubberband\"\r\n        className=\"rubberBand-Container\"\r\n        width=\"100%\"\r\n        height=\"100%\"\r\n        onMouseDown={(event) => {\r\n          this.props.doRubberMouseDown(event, Consts.MODE_RUBER_BAND_MOVE);\r\n        }}\r\n      >\r\n        <g transform={`matrix(${coordinates.transform})`}>\r\n          <rect\r\n            className=\"rubberBand\"\r\n            x={coordinates.x}\r\n            y={coordinates.y}\r\n            width={coordinates.w}\r\n            height={coordinates.h}\r\n          />\r\n\r\n          <rect\r\n            className=\"rubberBandHandle\"\r\n            x={coordinates.x - Consts.RUBBER_BAND_HANDLE_SIZE}\r\n            y={coordinates.y - Consts.RUBBER_BAND_HANDLE_SIZE}\r\n            width={Consts.RUBBER_BAND_HANDLE_SIZE}\r\n            height={Consts.RUBBER_BAND_HANDLE_SIZE}\r\n            onMouseDown={(event) => {\r\n              this.props.doRubberMouseDown(\r\n                event,\r\n                Consts.MODE_RUBER_BAND_RESIZE_UL\r\n              );\r\n            }}\r\n          />\r\n          <rect\r\n            className=\"rubberBandHandle\"\r\n            x={coordinates.x + coordinates.w}\r\n            y={coordinates.y - Consts.RUBBER_BAND_HANDLE_SIZE}\r\n            width={Consts.RUBBER_BAND_HANDLE_SIZE}\r\n            height={Consts.RUBBER_BAND_HANDLE_SIZE}\r\n            onMouseDown={(event) => {\r\n              this.props.doRubberMouseDown(\r\n                event,\r\n                Consts.MODE_RUBER_BAND_RESIZE_UR\r\n              );\r\n            }}\r\n          />\r\n          <rect\r\n            className=\"rubberBandHandle\"\r\n            x={coordinates.x - Consts.RUBBER_BAND_HANDLE_SIZE}\r\n            y={coordinates.y + coordinates.h}\r\n            width={Consts.RUBBER_BAND_HANDLE_SIZE}\r\n            height={Consts.RUBBER_BAND_HANDLE_SIZE}\r\n            onMouseDown={(event) => {\r\n              this.props.doRubberMouseDown(\r\n                event,\r\n                Consts.MODE_RUBER_BAND_RESIZE_DL\r\n              );\r\n            }}\r\n          />\r\n          <rect\r\n            className=\"rubberBandHandle\"\r\n            x={coordinates.x + coordinates.w}\r\n            y={coordinates.y + coordinates.h}\r\n            width={Consts.RUBBER_BAND_HANDLE_SIZE}\r\n            height={Consts.RUBBER_BAND_HANDLE_SIZE}\r\n            onMouseDown={(event) => {\r\n              this.props.doRubberMouseDown(\r\n                event,\r\n                Consts.MODE_RUBER_BAND_RESIZE_DR\r\n              );\r\n            }}\r\n          />\r\n          <rect\r\n            className=\"rubberBandHandle\"\r\n            x={\r\n              coordinates.x + coordinates.w / 2 - Consts.RUBBER_BAND_HANDLE_SIZE\r\n            }\r\n            y={coordinates.y + coordinates.h * 1.5}\r\n            width={Consts.RUBBER_BAND_HANDLE_SIZE}\r\n            height={Consts.RUBBER_BAND_HANDLE_SIZE}\r\n            onMouseDown={(event) => {\r\n              this.props.doRubberMouseDown(\r\n                event,\r\n                Consts.MODE_RUBER_BAND_ROTATE\r\n              );\r\n            }}\r\n          />\r\n        </g>\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RubberBand;\r\n","export default class ZoomPanHelper {\r\n  pan(dx, dy, transformMatrix) {\r\n    transformMatrix.e -= dx;\r\n    transformMatrix.f -= dy;\r\n  }\r\n\r\n  zoom(scale, cx, cy, transformMatrix) {\r\n    transformMatrix.e -= cx;\r\n    transformMatrix.f -= cy;\r\n\r\n    transformMatrix.a *= scale;\r\n    transformMatrix.b *= scale;\r\n    transformMatrix.c *= scale;\r\n    transformMatrix.d *= scale;\r\n    transformMatrix.e *= scale;\r\n    transformMatrix.f *= scale;\r\n\r\n    transformMatrix.e += cx;\r\n    transformMatrix.f += cy;\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport interface ViewPortElementProps {\r\n  doObjectMouseDown: Function;\r\n  transform: string;\r\n  box: any;\r\n  id: string;\r\n  children?: any;\r\n}\r\n\r\nexport class ViewPortElement extends React.PureComponent<ViewPortElementProps> {\r\n  x = 0;\r\n  y = 0;\r\n  w = 100;\r\n  h = 100;\r\n  transform = `1,0,0,1,0,0`;\r\n  id = '';\r\n\r\n  constructor(props: ViewPortElementProps) {\r\n    super(props);\r\n\r\n    const propsChildren = props.children ? props.children.props : null;\r\n    const { x, y, w, h } = propsChildren;\r\n    this.x = x ? x : 0;\r\n    this.y = y ? y : 0;\r\n    this.w = w ? w : 100;\r\n    this.h = h ? h : 100;\r\n    this.transform = `1,0,0,1,${this.x},${this.y}`;\r\n    this.id = props.id;\r\n  }\r\n\r\n  render() {\r\n    const { transform, children, box } = this.props;\r\n    this.transform = transform ? transform : this.transform;\r\n\r\n    if (box) {\r\n      this.w = box.w;\r\n      this.h = box.h;\r\n    }\r\n\r\n    return (\r\n      <div\r\n        id={`${this.props.id}`}\r\n        style={{\r\n          overflow: 'hidden',\r\n          transformOrigin: '0% 0%',\r\n          top: 0,\r\n          left: 0,\r\n          height: this.h,\r\n          width: this.w,\r\n          position: 'absolute',\r\n          transform: `matrix(${this.transform})`,\r\n        }}\r\n        onMouseDown={(e) => this.props.doObjectMouseDown(e, null, this)}\r\n      >\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { createRef } from 'react';\r\nimport RubberBand from './rubberBand/RubberBand';\r\nimport Consts, { ObjectTypes } from './helpers/ViewPortConst';\r\nimport SpacialHelper from './helpers/SpacialHelper';\r\nimport ZoomPanHelper from './helpers/ZoomPanHelper';\r\nimport Matrix from './helpers/Matrix';\r\nimport { ViewPortElement } from './renderer/HOCElement';\r\nimport './ZoomPan.css';\r\nimport type { Coordinate } from './helpers/types';\r\n\r\nexport interface ZoomPanProps {\r\n  viewportMtx?: any;\r\n  children?: any;\r\n  selectedItem?: any;\r\n  onSelectItem?: Function;\r\n  onChange?: Function;\r\n  onAddItem?: Function;\r\n}\r\n\r\nexport interface ZoomPanState {\r\n  dragging?: boolean;\r\n  viewportMtx: Matrix;\r\n  viewportTr?: string;\r\n  selection: any;\r\n  box?: any;\r\n}\r\n\r\nexport class ZoomPan extends React.Component<ZoomPanProps, ZoomPanState> {\r\n  private containerRef = createRef<HTMLDivElement>();\r\n\r\n  selection: any = null;\r\n  zoomPanHelper: ZoomPanHelper;\r\n  draggingPositionX = 0;\r\n  draggingPositionY = 0;\r\n  mode = Consts.MODE_GLOBAL_PAN;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    //Init Controllers\r\n    this.zoomPanHelper = new ZoomPanHelper();\r\n\r\n    //Initialization of state\r\n    this.state = {\r\n      dragging: false,\r\n      viewportMtx: new Matrix(this.props.viewportMtx),\r\n      viewportTr: '1,0,0,1,0,0',\r\n      selection: this.getSelectedObjInfo(null),\r\n    };\r\n    this.draggingPositionX = 0;\r\n    this.draggingPositionY = 0;\r\n    this.mode = Consts.MODE_GLOBAL_PAN;\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (nextState.dragging !== this.state.dragging) {\r\n      this.addRemoveMouseListener(nextState, this.state);\r\n    }\r\n    if (nextProps.selectedItem !== this.props.selectedItem) {\r\n      //force state to be new selection\r\n      nextState.selection = this.getSelectedObjInfo(nextProps.selectedItem);\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  addRemoveMouseListener = (newState, oldState) => {\r\n    if (newState.dragging && !oldState.dragging) {\r\n      document.addEventListener('mousemove', this.doMouseMove);\r\n      document.addEventListener('mouseup', this.doMouseUp);\r\n    } else if (!newState.dragging && oldState.dragging) {\r\n      document.removeEventListener('mousemove', this.doMouseMove);\r\n      document.removeEventListener('mouseup', this.doMouseUp);\r\n    }\r\n  };\r\n\r\n  getSelectedObjInfo = (item) => {\r\n    const matrix = item ? new Matrix(item.transform) : new Matrix();\r\n    const box = item\r\n      ? { id: item.id, x: 0, y: 0, w: item.w, h: item.h }\r\n      : { id: '', x: 0, y: 0, w: 0, h: 0 };\r\n    const type = item ? this.getObjType(item) : ObjectTypes.TYPE_ITEM;\r\n    \r\n    return {\r\n      id: item ? item.id : -1,\r\n      item: item,\r\n      matrix: matrix,\r\n      transform: matrix.matrixToText(),\r\n      box: box,\r\n      type: type,\r\n    };\r\n  };\r\n\r\n  ///////////////////\r\n  /// MOUSE EVENT ///\r\n  ///////////////////\r\n\r\n  //When we click anywhere that is not an Object or the rubberband\r\n  doGlobalMouseDown = (e) => {\r\n    if (e.button === 0) {\r\n      this.setDraggingPosition(e);\r\n      this.setState({ dragging: true });\r\n      this.mode = Consts.MODE_GLOBAL_PAN;\r\n    }\r\n  };\r\n\r\n  doObjectMouseDown = (e, parent, item) => {\r\n    e.stopPropagation();\r\n    this.setDraggingPosition(e);\r\n    this.setState({ dragging: true });\r\n    if (this.props.onSelectItem) this.props.onSelectItem(parent, item);\r\n    this.selection = item;\r\n    //this.updateSelectedInfo(parent, item);\r\n    const selection = this.getSelectedObjInfo(item);\r\n    this.setState({ dragging: true, selection: selection });\r\n    this.mode = Consts.MODE_RUBER_BAND_MOVE;\r\n  };\r\n\r\n  doRubberMouseDown = (e, mode, item) => {\r\n    e.stopPropagation();\r\n    this.setDraggingPosition(e);\r\n    this.setState({ dragging: true });\r\n    this.mode = mode;\r\n  };\r\n\r\n  ///////////////////////\r\n  /// MOUSE EVENTS  ////\r\n  /////////////////////\r\n\r\n  doMouseMove = (e) => {\r\n    if (this.state.dragging) {\r\n      e.stopPropagation();\r\n      const coor = this.adjustCoor(e.clientX, e.clientY);\r\n      const x = coor.x;\r\n      const y = coor.y;\r\n\r\n      const deltaX = this.draggingPositionX - x;\r\n      const deltaY = this.draggingPositionY - y;\r\n\r\n      switch (this.mode) {\r\n        case Consts.MODE_GLOBAL_PAN:\r\n          this.pan(deltaX, deltaY);\r\n          break;\r\n        case Consts.MODE_RUBER_BAND_MOVE:\r\n          this.updateSelectedItem(\r\n            SpacialHelper.moveObject(deltaX, deltaY, this.state)\r\n          );\r\n          break;\r\n        case Consts.MODE_RUBER_BAND_ROTATE:\r\n          this.updateSelectedItem(\r\n            SpacialHelper.rotateObject(\r\n              x,\r\n              y,\r\n              this.draggingPositionX,\r\n              this.draggingPositionY,\r\n              this.state\r\n            )\r\n          );\r\n          break;\r\n\r\n        case Consts.MODE_RUBER_BAND_RESIZE_UL:\r\n        case Consts.MODE_RUBER_BAND_RESIZE_UR:\r\n        case Consts.MODE_RUBER_BAND_RESIZE_DL:\r\n        case Consts.MODE_RUBER_BAND_RESIZE_DR:\r\n          const newState = SpacialHelper.resizeObject(\r\n            deltaX,\r\n            deltaY,\r\n            this.mode,\r\n            this.state\r\n          );\r\n          this.updateSelectedItem(newState);\r\n          break;\r\n      }\r\n\r\n      this.setDraggingPosition(e);\r\n    }\r\n  };\r\n\r\n  doMouseUp = () => {\r\n    this.setState({ dragging: false });\r\n    if (this.state.selection.type == ObjectTypes.TYPE_LINK) {\r\n      if (this.props.onSelectItem) this.props.onSelectItem(null, null);\r\n    }\r\n    if (this.props.selectedItem && this.props.onChange)\r\n      this.props.onChange(this.props.selectedItem, {\r\n        transform: this.state.selection.matrix.matrixToText(),\r\n        w: this.state.selection.box.w,\r\n        h: this.state.selection.box.h,\r\n      });\r\n  };\r\n\r\n  doMouseWheel = (e) => {\r\n    e.preventDefault();\r\n    const coor: Coordinate = this.adjustCoor(e.clientX, e.clientY);\r\n    const cx = coor.x;\r\n    const cy = coor.y;\r\n    const scale = e.deltaY > 0 ? 1.05 : 0.95;\r\n    this.zoom(scale, cx, cy);\r\n  };\r\n\r\n  private adjustCoor(x: number, y: number): Coordinate {\r\n    const newX = x - (this.containerRef.current?.offsetLeft || 0);\r\n    const newY = y - (this.containerRef.current?.offsetTop || 0);\r\n\r\n    return { x: newX, y: newY };\r\n  }\r\n\r\n  ownEvent(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  }\r\n\r\n  ////////////////////////////\r\n  //   DRAG & DROP EVENTS  //\r\n  //////////////////////////\r\n\r\n  onDragOver = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  onDrop = (e) => {\r\n    // let objType = parseInt(e.dataTransfer.getData('objtype'));\r\n    // if (\r\n    //   objType == ObjectTypes.TYPE_PAGE ||\r\n    //   objType == ObjectTypes.TYPE_ACTION ||\r\n    //   objType == ObjectTypes.TYPE_REDUCER\r\n    // ) {\r\n    //   const adcoor: ICoor = this.adjustCoor(e.clientX, e.clientY);\r\n    //   let x = adcoor.x;\r\n    //   let y = adcoor.y;\r\n    //   let coor = SpacialHelper.coordinatesGlobalToLocal(\r\n    //     x,\r\n    //     y,\r\n    //     this.state.viewportMtx,\r\n    //     null\r\n    //   );\r\n    //   let matrix = `1, 0, 0, 1, ${coor.x}, ${coor.y}`;\r\n    //   this.addItem(e, null, matrix);\r\n    // }\r\n  };\r\n\r\n  addItem = (e, parent, matrix) => {\r\n    const type = parseInt(e.dataTransfer.getData('type'));\r\n    const subtype = e.dataTransfer.getData('subtype');\r\n    const objType = parseInt(e.dataTransfer.getData('objtype'));\r\n    const name = e.dataTransfer.getData('name');\r\n    const data = {\r\n      name: name,\r\n      type: type,\r\n      objType: objType,\r\n      subtype: subtype,\r\n      transform: matrix,\r\n    };\r\n    const { onAddItem } = this.props;\r\n\r\n    onAddItem && onAddItem(data, parent);\r\n  };\r\n\r\n  updateSelectedItem = (newState) => {\r\n    const matrix = newState.matrix;\r\n    // newState.box?newState.box.id=this.state.box.id:null;\r\n    const box = newState.box ? newState.box : this.state.selection.box;\r\n    const selection = { ...this.state.selection };\r\n    selection.matrix = matrix;\r\n    selection.transform = matrix.matrixToText();\r\n    selection.box = box;\r\n    this.setState({ box: box, selection: selection });\r\n  };\r\n\r\n  //////////////////////////\r\n  // VIEW PORT ZOOM & PAN //\r\n  /////////////////////////\r\n\r\n  pan = (dx: number, dy: number) => {\r\n    this.zoomPanHelper.pan(dx, dy, this.state.viewportMtx);\r\n    this.applyMatrix();\r\n  };\r\n\r\n  zoom = (scale: number, cx, cy) => {\r\n    this.zoomPanHelper.zoom(scale, cx, cy, this.state.viewportMtx);\r\n    this.applyMatrix();\r\n  };\r\n\r\n  applyMatrix = () => {\r\n    const newMatrix = this.state.viewportMtx.matrixToText();\r\n    this.setState({\r\n      viewportTr: newMatrix,\r\n    });\r\n  };\r\n\r\n  /////////////////////////\r\n  //       HELPERS       //\r\n  /////////////////////////\r\n  getObjType(item) {\r\n    if (\r\n      item.hasOwnProperty('start') &&\r\n      item.hasOwnProperty('output') &&\r\n      item.hasOwnProperty('end') &&\r\n      item.hasOwnProperty('input')\r\n    ) {\r\n      return ObjectTypes.TYPE_LINK;\r\n    }\r\n    return ObjectTypes.TYPE_ITEM;\r\n  }\r\n\r\n  setDraggingPosition = (e) => {\r\n    this.draggingPositionX =\r\n      e.clientX - (this.containerRef.current?.offsetLeft || 0);\r\n    this.draggingPositionY =\r\n      e.clientY - (this.containerRef.current?.offsetTop || 0);\r\n  };\r\n\r\n  renderChildren = () => {\r\n    const selection = this.state.selection;\r\n    const { children } = this.props;\r\n\r\n    if (children == null) {\r\n      return null;\r\n    }\r\n\r\n    return React.Children.map(children, (item, i) => {\r\n      const transform = selection.id == i ? selection.transform : null;\r\n      const box = selection.id == i ? selection.box : null;\r\n\r\n      return (\r\n        <ViewPortElement\r\n          id={i.toString()}\r\n          key={i}\r\n          transform={transform}\r\n          box={box}\r\n          doObjectMouseDown={this.doObjectMouseDown}\r\n        >\r\n          {item}\r\n        </ViewPortElement>\r\n      );\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { viewportTr } = this.state;\r\n\r\n    return (\r\n      <div\r\n        ref={this.containerRef}\r\n        className=\"zoom-pan-container\"\r\n        onDragOver={this.onDragOver}\r\n        onDrop={this.onDrop}\r\n        tabIndex={0}\r\n      >\r\n        <div\r\n          id=\"viewport\"\r\n          style={{ position: 'relative', userSelect: 'none', height: '100%' }}\r\n          onMouseDown={this.doGlobalMouseDown}\r\n          onWheel={this.doMouseWheel}\r\n        >\r\n          <div\r\n            style={{\r\n              transform: `matrix(${viewportTr})`,\r\n              position: 'absolute',\r\n            }}\r\n          >\r\n            {this.renderChildren()}\r\n          </div>\r\n          <RubberBand\r\n            selection={this.selection}\r\n            viewport={this.state}\r\n            doRubberMouseDown={this.doRubberMouseDown}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"names":["Registry","React","createRef"],"mappings":"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"}